{"ts":1368606056150,"silentsave":true,"restoring":false,"patch":[[]],"length":0}
{"contributors":[],"silentsave":true,"ts":1368606057925,"patch":[[{"diffs":[[1,"var debug = require('debug')('config'),\npath = require('path'),\nexpress = require('express');\n\n// Export nothing, only extend express' HTTPServer with an \"applyConfiguration\" method\n// (extend HTTPSServer if https is used). Will NOT work with Express 3.0.\nexpress.HTTPServer.prototype.applyConfiguration = function () {\nvar self = this,\nrootDir = path.resolve(__dirname, '..');\n\nthis.configure(function () {\ndebug('setting up common configuration...');\n\n// Configure jade as template engine\nself.set('views', rootDir + '/views');\nself.set('view engine', 'jade');\nself.set(\"view options\", {layout: false});\n\n// Parse the body\nself.use(express.bodyParser());\n\n// Use the method override so that PUT and DELETE can be simulated with a POST\nself.use(express.methodOverride());\n\n// Parse the cookies\nself.use(express.cookieParser());\n\n// Session support, in normal use, put secret in environment var:\n// self.use(express.session({ secret: process.env.MY_SESSION_SECRET }));\nself.use(express.session({ secret: 'hypermegatop really!' }));\n\n// Enable the router\nself.use(self.router);\n\n// Serve static content from \"public\" directory\nself.use(express.static(rootDir + '/public'));\n});\n\nthis.configure('dev', function () {\ndebug('setting up \"dev\" configuration...');\nself.use(express.logger('tiny'));\nself.use(express.errorHandler({ dumpExceptions: true, showStack: true }));\n});\n\nthis.configure('production', function () {\ndebug('setting up \"production\" configuration...');\nself.use(express.errorHandler());\n});\n}"]],"start1":0,"start2":0,"length1":0,"length2":1505}]],"length":1505,"saved":false}
{"ts":1368606113766,"patch":[[{"diffs":[[0,"on () {\n"],[1,"    "],[0,"var self"]],"start1":312,"start2":312,"length1":16,"length2":20}]],"length":1509,"saved":false}
{"ts":1368606115057,"patch":[[{"diffs":[[0,"= this,\n"],[1,"    "],[0,"rootDir "]],"start1":333,"start2":333,"length1":16,"length2":20}]],"length":1513,"saved":false}
{"ts":1368606117049,"patch":[[{"diffs":[[0," = this,"],[-1,"\n   "],[0," rootDir"]],"start1":332,"start2":332,"length1":20,"length2":16}]],"length":1509,"saved":false}
{"ts":1368606126710,"patch":[[{"diffs":[[0,"me, '..');\n\n"],[1,"    "],[0,"this.configu"]],"start1":371,"start2":371,"length1":24,"length2":28},{"diffs":[[0,"e(function () {\n"],[1,"    "],[0,"debug('setting u"]],"start1":400,"start2":400,"length1":32,"length2":36},{"diffs":[[0,"n...');\n"],[-1,"\n"],[1,"    \n    "],[0,"// Confi"]],"start1":457,"start2":457,"length1":17,"length2":25},{"diffs":[[0," engine\n"],[1,"    "],[0,"self.set"]],"start1":503,"start2":503,"length1":16,"length2":20},{"diffs":[[0," '/views');\n"],[1,"    "],[0,"self.set('vi"]],"start1":542,"start2":542,"length1":24,"length2":28},{"diffs":[[0,"', 'jade');\n"],[1,"    "],[0,"self.set(\"vi"]],"start1":579,"start2":579,"length1":24,"length2":28},{"diffs":[[0,"alse});\n"],[-1,"\n"],[1,"    \n    "],[0,"// Parse"]],"start1":630,"start2":630,"length1":17,"length2":25},{"diffs":[[0,"he body\n"],[1,"    "],[0,"self.use"]],"start1":657,"start2":657,"length1":16,"length2":20},{"diffs":[[0,"ser());\n"],[-1,"\n"],[1,"    \n    "],[0,"// Use t"]],"start1":693,"start2":693,"length1":17,"length2":25},{"diffs":[[0," a POST\n"],[1,"    "],[0,"self.use"]],"start1":781,"start2":781,"length1":16,"length2":20},{"diffs":[[0,"ide());\n"],[-1,"\n"],[1,"    \n    "],[0,"// Parse"]],"start1":821,"start2":821,"length1":17,"length2":25},{"diffs":[[0,"cookies\n"],[1,"    "],[0,"self.use"]],"start1":851,"start2":851,"length1":16,"length2":20},{"diffs":[[0,"ser());\n"],[-1,"\n"],[1,"    \n    "],[0,"// Sessi"]],"start1":889,"start2":889,"length1":17,"length2":25},{"diffs":[[0,"nt var:\n"],[1,"    "],[0,"// self."]],"start1":964,"start2":964,"length1":16,"length2":20},{"diffs":[[0,"SECRET }));\n"],[1,"    "],[0,"self.use(exp"]],"start1":1037,"start2":1037,"length1":24,"length2":28},{"diffs":[[0,"!' }));\n"],[-1,"\n"],[1,"    \n    "],[0,"// Enabl"]],"start1":1108,"start2":1108,"length1":17,"length2":25},{"diffs":[[0," router\n"],[1,"    "],[0,"self.use"]],"start1":1138,"start2":1138,"length1":16,"length2":20},{"diffs":[[0,"outer);\n"],[-1,"\n"],[1,"    \n    "],[0,"// Serve"]],"start1":1165,"start2":1165,"length1":17,"length2":25},{"diffs":[[0,"rectory\n"],[1,"    "],[0,"self.use"]],"start1":1222,"start2":1222,"length1":16,"length2":20},{"diffs":[[0,"/public'));\n"],[-1,"});\n\n"],[1,"    });\n    \n    "],[0,"this.configu"]],"start1":1269,"start2":1269,"length1":29,"length2":41},{"diffs":[[0,", function () {\n"],[1,"    "],[0,"debug('setting u"]],"start1":1318,"start2":1318,"length1":32,"length2":36},{"diffs":[[0,"iguration...');\n"],[1,"    "],[0,"self.use(express"]],"start1":1366,"start2":1366,"length1":32,"length2":36},{"diffs":[[0,"iny'));\n"],[1,"    "],[0,"self.use"]],"start1":1412,"start2":1412,"length1":16,"length2":20},{"diffs":[[0,"));\n"],[-1,"});\n\n"],[1,"    });\n    \n    "],[0,"this"]],"start1":1495,"start2":1495,"length1":13,"length2":25},{"diffs":[[0,"on () {\n"],[1,"    "],[0,"debug('s"]],"start1":1551,"start2":1551,"length1":16,"length2":20},{"diffs":[[0,"n...');\n"],[1,"    "],[0,"self.use"]],"start1":1606,"start2":1606,"length1":16,"length2":20},{"diffs":[[0,"ler());\n"],[1,"    "],[0,"});\n}"]],"start1":1644,"start2":1644,"length1":13,"length2":17}]],"length":1661,"saved":false}
{"ts":1368606138579,"patch":[[{"diffs":[[0,"e(function () {\n"],[1,"    "],[0,"    debug('setti"]],"start1":400,"start2":400,"length1":32,"length2":36},{"diffs":[[0,"');\n    "],[-1,"\n"],[1,"    \n "],[0,"    "],[1,"   "],[0,"// Confi"]],"start1":465,"start2":465,"length1":21,"length2":29},{"diffs":[[0," engine\n    "],[1,"  "],[1,"  "],[0,"self.set('vi"]],"start1":515,"start2":515,"length1":24,"length2":28},{"diffs":[[0," '/views');\n    "],[1,"  "],[1,"  "],[0,"self.set('view e"]],"start1":558,"start2":558,"length1":32,"length2":36},{"diffs":[[0,"', 'jade');\n"],[1,"    "],[0,"    self.set"]],"start1":599,"start2":599,"length1":24,"length2":28},{"diffs":[[0,"alse});\n    "],[1,"   "],[-1,"\n"],[1," \n    "],[0,"    // Parse"]],"start1":654,"start2":654,"length1":25,"length2":33},{"diffs":[[0,"he body\n"],[1,"    "],[0,"    self"]],"start1":689,"start2":689,"length1":16,"length2":20},{"diffs":[[0,"ser());\n    "],[-1,"\n"],[1,"    \n    "],[0,"    // Use t"]],"start1":729,"start2":729,"length1":25,"length2":33},{"diffs":[[0," a POST\n"],[1,"    "],[0,"    self"]],"start1":825,"start2":825,"length1":16,"length2":20},{"diffs":[[0,"));\n    "],[-1,"\n"],[1,"    \n  "],[0,"    "],[1,"  "],[0,"// Parse"]],"start1":873,"start2":873,"length1":21,"length2":29},{"diffs":[[0,"cookies\n"],[1,"    "],[0,"    self"]],"start1":907,"start2":907,"length1":16,"length2":20},{"diffs":[[0,"ser());\n    "],[1,"   "],[-1,"\n"],[1," \n    "],[0,"    // Sessi"]],"start1":949,"start2":949,"length1":25,"length2":33},{"diffs":[[0,"nt var:\n"],[1,"    "],[0,"    // s"]],"start1":1032,"start2":1032,"length1":16,"length2":20},{"diffs":[[0,"SECRET }));\n"],[1,"    "],[0,"    self.use"]],"start1":1109,"start2":1109,"length1":24,"length2":28},{"diffs":[[0,"));\n    "],[-1,"\n"],[1,"    \n "],[0,"    "],[1,"   "],[0,"// Enabl"]],"start1":1188,"start2":1188,"length1":21,"length2":29},{"diffs":[[0," router\n    "],[1,"  "],[1,"  "],[0,"self.use(sel"]],"start1":1222,"start2":1222,"length1":24,"length2":28},{"diffs":[[0,"outer);\n    "],[1,"  "],[-1,"\n"],[1,"  \n    "],[0,"    // Serve"]],"start1":1253,"start2":1253,"length1":25,"length2":33},{"diffs":[[0,"rectory\n    "],[1,"   "],[1," "],[0,"self.use(exp"]],"start1":1318,"start2":1318,"length1":24,"length2":28},{"diffs":[[0,"lic'));\n    "],[-1,"});\n"],[1,"    });\n    "],[0,"    \n"],[1,"    "],[0,"    this.con"]],"start1":1373,"start2":1373,"length1":33,"length2":45},{"diffs":[[0,", function () {\n"],[1,"    "],[0,"    debug('setti"]],"start1":1430,"start2":1430,"length1":32,"length2":36},{"diffs":[[0,"ation...');\n    "],[1," "],[1,"   "],[0,"self.use(express"]],"start1":1486,"start2":1486,"length1":32,"length2":36},{"diffs":[[0,"r('tiny'));\n"],[1,"    "],[0,"    self.use"]],"start1":1528,"start2":1528,"length1":24,"length2":28},{"diffs":[[0,"    "],[1,"  "],[1,"  "],[0,"});\n    "],[1,"   "],[-1,"\n"],[1," \n   "],[0,"    "],[1," "],[0,"this"]],"start1":1623,"start2":1623,"length1":21,"length2":33},{"diffs":[[0,"nction () {\n"],[1,"    "],[0,"    debug('s"]],"start1":1683,"start2":1683,"length1":24,"length2":28},{"diffs":[[0,"ation...');\n"],[1,"    "],[0,"    self.use"]],"start1":1742,"start2":1742,"length1":24,"length2":28}]],"length":1805,"saved":false}
{"ts":1368606147975,"patch":[[{"diffs":[[0,"on () {\n        "],[1,"    "],[0,"debug('setting u"]],"start1":1438,"start2":1438,"length1":32,"length2":36},{"diffs":[[0,"n...');\n        "],[1,"    "],[0,"self.use(express"]],"start1":1494,"start2":1494,"length1":32,"length2":36},{"diffs":[[0,"r('tiny'));\n"],[1,"    "],[0,"        self"]],"start1":1536,"start2":1536,"length1":24,"length2":28}]],"length":1817,"saved":false}
{"ts":1368606151164,"patch":[[{"diffs":[[0,"on () {\n        "],[1,"    "],[0,"debug('setting u"]],"start1":1699,"start2":1699,"length1":32,"length2":36}]],"length":1821,"saved":false}
{"ts":1368606152165,"patch":[[{"diffs":[[0,"n...');\n        "],[1,"    "],[0,"self.use(express"]],"start1":1762,"start2":1762,"length1":32,"length2":36}]],"length":1825,"saved":false}
{"contributors":[],"silentsave":true,"ts":1368608853893,"patch":[[{"diffs":[[0,"nfig'),\n"],[1,"    "],[0,"path = r"]],"start1":32,"start2":32,"length1":16,"length2":20},{"diffs":[[0,"path'),\n"],[1,"    "],[0,"express "]],"start1":60,"start2":60,"length1":16,"length2":20},{"diffs":[[0," = this,"],[1,"\n   "],[0," rootDir"]],"start1":340,"start2":340,"length1":16,"length2":20},{"diffs":[[0," '..');\n"],[1,"    "],[0,"\n    thi"]],"start1":386,"start2":386,"length1":16,"length2":20},{"diffs":[[0,"/public'));\n"],[-1,"    "],[0,"    });\n    "]],"start1":1385,"start2":1385,"length1":28,"length2":24},{"diffs":[[0,"    });\n    "],[-1,"  "],[-1,"  \n   "],[1,"\n"],[0,"    "],[-1," "],[0,"this.configu"]],"start1":1397,"start2":1397,"length1":37,"length2":29},{"diffs":[[0,", function () {\n"],[-1,"    "],[0,"        debug('s"]],"start1":1434,"start2":1434,"length1":36,"length2":32},{"diffs":[[0,"n...');\n        "],[-1," "],[-1,"   "],[0,"self.use(express"]],"start1":1494,"start2":1494,"length1":36,"length2":32},{"diffs":[[0,"iny'));\n        "],[-1,"  "],[-1,"  "],[0,"self.use(express"]],"start1":1536,"start2":1536,"length1":36,"length2":32},{"diffs":[[0,": true }));\n"],[-1,"    "],[0,"    });\n    "]],"start1":1615,"start2":1615,"length1":28,"length2":24},{"diffs":[[0,"});\n    "],[-1," "],[-1,"   \n "],[1,"\n"],[0,"    "],[-1,"   "],[0,"this.con"]],"start1":1631,"start2":1631,"length1":29,"length2":21},{"diffs":[[0,"nction () {\n"],[-1,"    "],[0,"        debu"]],"start1":1675,"start2":1675,"length1":28,"length2":24},{"diffs":[[0,"ation...');\n"],[-1,"    "],[0,"        self"]],"start1":1734,"start2":1734,"length1":28,"length2":24},{"diffs":[[0,"   });\n}"],[-1,""],[0,""],[1,"\n"]],"start1":1789,"start2":1789,"length1":8,"length2":9}]],"length":1798,"saved":false}
{"ts":1368608867663,"patch":[[{"diffs":[[0,"   });\n}"],[1,";"],[0,"\n"]],"start1":1789,"start2":1789,"length1":9,"length2":10}]],"length":1799,"saved":false}
{"ts":1368608868731,"patch":[[{"diffs":[[0," });\n};\n"],[1,"\n"]],"start1":1791,"start2":1791,"length1":8,"length2":9}]],"length":1800,"saved":false}
{"ts":1369212042044,"patch":[[{"diffs":[[0,"xpress')"],[-1,";"],[1,",\n    passport = require('passport'),\n    LocalStrategy = require('passport-local').Strategy;\n\nvar users = [{ id: 1, username: 'slelann', password: 'satanas', email: 'slelann@gmail.com' }];\n\n\n// Use the LocalStrategy within Passport.\n// Strategies in passport require a `verify` function, which accept\n// credentials (in this case, a username and password), and invoke a callback\n// with a user object. In the real world, this would query a database;\n// however, in this example we are using a baked-in set of users.\npassport.use(new LocalStrategy(\n  function(username, password, done) {\n    // asynchronous verification, for effect...\n    process.nextTick(function () {\n      \n      // Find the user by username. If there is no user with the given\n      // username, or the password is not correct, set the user to `false` to\n      // indicate failure and set a flash message. Otherwise, return the\n      // authenticated `user`.\n      findByUsername(username, function(err, user) {\n        if (err) { return done(err); }\n        if (!user) { return done(null, false, { message: 'Unknown user ' + username }); }\n        if (user.password != password) { return done(null, false, { message: 'Invalid password' }); }\n        return done(null, user);\n      })\n    });\n  }\n));\n\nfunction findByUsername(username, fn) {\n  for (var i = 0, len = users.length; i < len; i++) {\n    var user = users[i];\n    if (user.username === username) {\n      return fn(null, user);\n    }\n  }\n  return fn(null, null);\n}"],[0,"\n\n// Exp"]],"start1":92,"start2":92,"length1":17,"length2":1512},{"diffs":[[0,"SECRET }));\n"],[-1,""],[0,"        self"]],"start1":2620,"start2":2620,"length1":24,"length2":24},{"diffs":[[0,"' }));\n        \n"],[1,"        //Passport\n        self.use(passport.initialize());\n        \n"],[0,"        // Enabl"]],"start1":2696,"start2":2696,"length1":32,"length2":101}]],"length":3364,"saved":false}
{"ts":1369212075556,"patch":[[{"diffs":[[0,"ss')"],[-1,",\n    passport = require('passport'),\n    LocalStrategy = require('passport-local').Strategy;\n\nvar users = [{ id: 1, username: 'slelann', password: 'satanas', email: 'slelann@gmail.com' }];\n\n\n// Use the LocalStrategy within Passport.\n// Strategies in passport require a `verify` function, which accept\n// credentials (in this case, a username and password), and invoke a callback\n// with a user object. In the real world, this would query a database;\n// however, in this example we are using a baked-in set of users.\npassport.use(new LocalStrategy(\n  function(username, password, done) {\n    // asynchronous verification, for effect...\n    process.nextTick(function () {\n      \n      // Find the user by username. If there is no user with the given\n      // username, or the password is not correct, set the user to `false` to\n      // indicate failure and set a flash message. Otherwise, return the\n      // authenticated `user`.\n      findByUsername(username, function(err, user) {\n        if (err) { return done(err); }\n        if (!user) { return done(null, false, { message: 'Unknown user ' + username }); }\n        if (user.password != password) { return done(null, false, { message: 'Invalid password' }); }\n        return done(null, user);\n      })\n    });\n  }\n));\n\nfunction findByUsername(username, fn) {\n  for (var i = 0, len = users.length; i < len; i++) {\n    var user = users[i];\n    if (user.username === username) {\n      return fn(null, user);\n    }\n  }\n  return fn(null, null);\n}"],[1,";"],[0,"\n\n//"]],"start1":96,"start2":96,"length1":1504,"length2":9},{"diffs":[[0,"SECRET }));\n"],[1,""],[0,"        self"]],"start1":1125,"start2":1125,"length1":24,"length2":24},{"diffs":[[0,"   \n"],[-1,"        //Passport\n        self.use(passport.initialize());\n        \n"],[0,"    "]],"start1":1213,"start2":1213,"length1":77,"length2":8}]],"length":1800,"saved":false}
{"ts":1369213956231,"patch":[[{"diffs":[[0,"xpress')"],[1,",\n    passport = require('passport')"],[0,";\n\n// Ex"]],"start1":92,"start2":92,"length1":16,"length2":52},{"diffs":[[0,"!' }));\n        "],[1,"self.use(passport.initialize());"],[0,"\n        // Enab"]],"start1":1236,"start2":1236,"length1":32,"length2":64}]],"length":1868,"saved":false}
{"ts":1369214077516,"patch":[[{"diffs":[[0,"ss')"],[-1,",\n    passport = require('passport')"],[0,";\n\n/"]],"start1":96,"start2":96,"length1":44,"length2":8},{"diffs":[[0,"    "],[-1,"self.use(passport.initialize());"],[0,"\n   "]],"start1":1212,"start2":1212,"length1":40,"length2":8}]],"length":1800,"saved":false}
{"ts":1369214160798,"patch":[[{"diffs":[[0,"xpress')"],[1,",\n    passport = require('passport'),\n    LocalStrategy = require('passport-local').Strategy;\n\nvar users = [{ id: 1, username: 'slelann', password: 'satanas', email: 'bob@example.com' }]"],[0,";\n\n// Ex"]],"start1":92,"start2":92,"length1":16,"length2":202},{"diffs":[[0,"!' }));\n        "],[1,"self.use(passport.initialize());"],[0,"\n        // Enab"]],"start1":1386,"start2":1386,"length1":32,"length2":64}]],"length":2018,"saved":false}
{"ts":1369214180352,"patch":[[{"diffs":[[0,"ss')"],[-1,",\n    passport = require('passport'),\n    LocalStrategy = require('passport-local').Strategy;\n\nvar users = [{ id: 1, username: 'slelann', password: 'satanas', email: 'bob@example.com' }]"],[0,";\n\n/"]],"start1":96,"start2":96,"length1":194,"length2":8},{"diffs":[[0,"    "],[-1,"self.use(passport.initialize());"],[0,"\n   "]],"start1":1212,"start2":1212,"length1":40,"length2":8}]],"length":1800,"saved":false}
{"ts":1369214221990,"patch":[[{"diffs":[[0,"xpress')"],[1,",\n    passport = require('passport'),\n    LocalStrategy = require('passport-local').Strategy;\n\nvar users = [{ id: 1, username: 'slelann', password: 'satanas', email: 'bob@example.com' }];\n\nfunction findByUsername(username, fn) {\n  for (var i = 0, len = users.length; i < len; i++) {\n    var user = users[i];\n    if (user.username === username) {\n      return fn(null, user);\n    }\n  }\n  return fn(null, null);\n}\n\n// Use the LocalStrategy within Passport.\n// Strategies in passport require a `verify` function, which accept\n// credentials (in this case, a username and password), and invoke a callback\n// with a user object. In the real world, this would query a database;\n// however, in this example we are using a baked-in set of users.\npassport.use(new LocalStrategy(\n  function(username, password, done) {\n    // asynchronous verification, for effect...\n    process.nextTick(function () {\n      \n      // Find the user by username. If there is no user with the given\n      // username, or the password is not correct, set the user to `false` to\n      // indicate failure and set a flash message. Otherwise, return the\n      // authenticated `user`.\n      findByUsername(username, function(err, user) {\n        if (err) { return done(err); }\n        if (!user) { return done(null, false, { message: 'Unknown user ' + username }); }\n        if (user.password != password) { return done(null, false, { message: 'Invalid password' }); }\n        return done(null, user);\n      })\n    });\n  }\n))"],[0,";\n\n// Ex"]],"start1":92,"start2":92,"length1":16,"length2":1508},{"diffs":[[0,"!' }));\n        "],[1,"self.use(passport.initialize());"],[0,"\n        // Enab"]],"start1":2692,"start2":2692,"length1":32,"length2":64}]],"length":3324,"saved":false}
{"ts":1369229542145,"patch":[[{"diffs":[[0,", fn) {\n"],[1,"\tdebug(\"findByUsername:\"+username)\n"],[0,"  for (v"]],"start1":321,"start2":321,"length1":16,"length2":51},{"diffs":[[0,"ll);\n}\n\n"],[1,"function findById(id, fn) {\n\tdebug(\"findById:\"+id)\n  var idx = id - 1;\n  if (users[idx]) {\n    fn(null, users[idx]);\n  } else {\n    fn(new Error('User ' + id + ' does not exist'));\n  }\n}\n\n// Passport session setup.\n// To support persistent login sessions, Passport needs to be able to\n// serialize users into and deserialize users out of the session. Typically,\n// this will be as simple as storing the user ID when serializing, and finding\n// the user by ID when deserializing.\npassport.serializeUser(function(user, done) {\n  done(null, user.id);\n});\n\npassport.deserializeUser(function(id, done) {\n  findById(id, function (err, user) {\n    done(err, user);\n  });\n});\n\n"],[0,"// Use t"]],"start1":540,"start2":540,"length1":16,"length2":685},{"diffs":[[0,"tialize());\n"],[1,"        self.use(passport.session());\n"],[0,"        // E"]],"start1":3433,"start2":3433,"length1":24,"length2":62}]],"length":4066,"saved":false}
{"ts":1369229554323,"patch":[[{"diffs":[[0,") {\n"],[-1,"\tdebug(\"findByUsername:\"+username)\n"],[0,"  fo"]],"start1":325,"start2":325,"length1":43,"length2":8},{"diffs":[[0,"\n}\n\n"],[-1,"function findById(id, fn) {\n\tdebug(\"findById:\"+id)\n  var idx = id - 1;\n  if (users[idx]) {\n    fn(null, users[idx]);\n  } else {\n    fn(new Error('User ' + id + ' does not exist'));\n  }\n}\n\n// Passport session setup.\n// To support persistent login sessions, Passport needs to be able to\n// serialize users into and deserialize users out of the session. Typically,\n// this will be as simple as storing the user ID when serializing, and finding\n// the user by ID when deserializing.\npassport.serializeUser(function(user, done) {\n  done(null, user.id);\n});\n\npassport.deserializeUser(function(id, done) {\n  findById(id, function (err, user) {\n    done(err, user);\n  });\n});\n\n"],[0,"// U"]],"start1":509,"start2":509,"length1":677,"length2":8},{"diffs":[[0,"));\n"],[-1,"        self.use(passport.session());\n"],[0,"    "]],"start1":2737,"start2":2737,"length1":46,"length2":8}]],"length":3324,"saved":false}
{"ts":1369229602327,"patch":[[{"diffs":[[0,", fn) {\n"],[1,"\tdebug(\"findByUsername:\"+username)\n"],[0,"  for (v"]],"start1":321,"start2":321,"length1":16,"length2":51},{"diffs":[[0,"ll);\n}\n\n"],[1,"function findById(id, fn) {\n\tdebug(\"findById:\"+id)\n  var idx = id - 1;\n  if (users[idx]) {\n    fn(null, users[idx]);\n  } else {\n    fn(new Error('User ' + id + ' does not exist'));\n  }\n}\n\n// Passport session setup.\n// To support persistent login sessions, Passport needs to be able to\n// serialize users into and deserialize users out of the session. Typically,\n// this will be as simple as storing the user ID when serializing, and finding\n// the user by ID when deserializing.\npassport.serializeUser(function(user, done) {\n  done(null, user.id);\n});\n\npassport.deserializeUser(function(id, done) {\n  findById(id, function (err, user) {\n    done(err, user);\n  });\n});\n\n"],[0,"// Use t"]],"start1":540,"start2":540,"length1":16,"length2":685},{"diffs":[[0,"on () {\n"],[-1,""],[0,"      "],[1,"debug(\"passport use...\")"],[0,"\n      /"]],"start1":1688,"start2":1688,"length1":22,"length2":46},{"diffs":[[0,"tialize());\n"],[1,"        self.use(passport.session());\n"],[0,"        // E"]],"start1":3457,"start2":3457,"length1":24,"length2":62}]],"length":4090,"saved":false}
{"contributors":[],"silentsave":true,"ts":1369229685251,"patch":[[{"diffs":[[0,") {\n"],[-1,"\tdebug(\"findByUsername:\"+username)\n"],[0,"  fo"]],"start1":325,"start2":325,"length1":43,"length2":8},{"diffs":[[0,"\n}\n\n"],[-1,"function findById(id, fn) {\n\tdebug(\"findById:\"+id)\n  var idx = id - 1;\n  if (users[idx]) {\n    fn(null, users[idx]);\n  } else {\n    fn(new Error('User ' + id + ' does not exist'));\n  }\n}\n\n// Passport session setup.\n// To support persistent login sessions, Passport needs to be able to\n// serialize users into and deserialize users out of the session. Typically,\n// this will be as simple as storing the user ID when serializing, and finding\n// the user by ID when deserializing.\npassport.serializeUser(function(user, done) {\n  done(null, user.id);\n});\n\npassport.deserializeUser(function(id, done) {\n  findById(id, function (err, user) {\n    done(err, user);\n  });\n});\n\n"],[0,"// U"]],"start1":509,"start2":509,"length1":677,"length2":8},{"diffs":[[0,") {\n"],[1,""],[0,"      "],[-1,"debug(\"passport use...\")"],[0,"\n   "]],"start1":988,"start2":988,"length1":38,"length2":14},{"diffs":[[0,"));\n"],[-1,"        self.use(passport.session());\n"],[0,"    "]],"start1":2737,"start2":2737,"length1":46,"length2":8}]],"length":3324,"saved":false}
{"contributors":[],"silentsave":true,"ts":1370960135068,"patch":[[{"diffs":[[0,", fn) {\n"],[1,"\tdebug\n"],[0,"  for (v"]],"start1":321,"start2":321,"length1":16,"length2":23}]],"length":3331,"saved":false}
{"ts":1370960135737,"patch":[[{"diffs":[[0,"{\n\tdebug"],[1,"."],[0,"\n  for ("]],"start1":327,"start2":327,"length1":16,"length2":17}]],"length":3332,"saved":false}
{"ts":1370960148575,"patch":[[{"diffs":[[0,"{\n\tdebug"],[-1,"."],[0,"\n  for ("]],"start1":327,"start2":327,"length1":17,"length2":16}]],"length":3331,"saved":false}
{"ts":1370960166292,"patch":[[{"diffs":[[0,"{\n\tdebug"],[1,"(\"find\")"],[0,"\n  for ("]],"start1":327,"start2":327,"length1":16,"length2":24}]],"length":3339,"saved":false}
{"ts":1370960169956,"patch":[[{"diffs":[[0,"ug(\"find"],[1,"ByUsername"],[0,"\")\n  for"]],"start1":333,"start2":333,"length1":16,"length2":26}]],"length":3349,"saved":false}
{"ts":1370960171736,"patch":[[{"diffs":[[0,"Username"],[-1,"\""],[1,":"],[0,")\n  for "]],"start1":343,"start2":343,"length1":17,"length2":17}]],"length":3349,"saved":false}
{"ts":1370960173431,"patch":[[{"diffs":[[0,"sername:"],[1,"\"+"],[0,")\n  for "]],"start1":344,"start2":344,"length1":16,"length2":18}]],"length":3351,"saved":false}
{"ts":1370960175805,"patch":[[{"diffs":[[0,"rname:\"+"],[1,"username"],[0,")\n  for "]],"start1":346,"start2":346,"length1":16,"length2":24}]],"length":3359,"saved":false}
{"ts":1370960189528,"patch":[[{"diffs":[[0,"username) {\n"],[1,"    \t\n"],[0,"      return"]],"start1":469,"start2":469,"length1":24,"length2":30}]],"length":3365,"saved":false}
{"ts":1370960190625,"patch":[[{"diffs":[[0," {\n    \t"],[1,"debug(\"findByUsername:\"+username)"],[0,"\n      r"]],"start1":478,"start2":478,"length1":16,"length2":49}]],"length":3398,"saved":false}
{"ts":1370960197780,"patch":[[{"diffs":[[0,"ByUsername:\""],[-1,"+username"],[0,")\n      retu"]],"start1":497,"start2":497,"length1":33,"length2":24}]],"length":3389,"saved":false}
{"ts":1370960201359,"patch":[[{"diffs":[[0,"debug(\"f"],[-1,"indByUsername:"],[1,"ound"],[0,"\")\n     "]],"start1":486,"start2":486,"length1":30,"length2":20}]],"length":3379,"saved":false}
{"ts":1370960205358,"patch":[[{"diffs":[[0,"\tdebug(\""],[1,"username "],[0,"found\")\n"]],"start1":485,"start2":485,"length1":16,"length2":25}]],"length":3388,"saved":false}
{"ts":1370960229191,"patch":[[{"diffs":[[0,"sername)"],[1,";"],[0,"\n  for ("]],"start1":355,"start2":355,"length1":16,"length2":17},{"diffs":[[0," found\")"],[1,";"],[0,"\n      r"]],"start1":502,"start2":502,"length1":16,"length2":17}]],"length":3390,"saved":false}
{"ts":1370960452046,"patch":[[{"diffs":[[0,"rr, user) {\n"],[1,"      \tdebug(\"req:\"+req);\n"],[0,"        if ("]],"start1":1359,"start2":1359,"length1":24,"length2":50}]],"length":3416,"saved":false}
{"ts":1370960455008,"patch":[[{"diffs":[[0,"(\"req:\"+"],[-1,"req"],[1,"user"],[0,");\n     "]],"start1":1383,"start2":1383,"length1":19,"length2":20}]],"length":3417,"saved":false}
{"ts":1370960456997,"patch":[[{"diffs":[[0,"(\"req:\"+user"],[1,"name"],[0,");\n        i"]],"start1":1383,"start2":1383,"length1":24,"length2":28}]],"length":3421,"saved":false}
{"ts":1370960461381,"patch":[[{"diffs":[[0,"\tdebug(\""],[-1,"req"],[1,"username"],[0,":\"+usern"]],"start1":1377,"start2":1377,"length1":19,"length2":24}]],"length":3426,"saved":false}
{"ts":1370960467981,"patch":[[{"diffs":[[0,") {\n    "],[-1,"  "],[0,"\tdebug(\""]],"start1":1367,"start2":1367,"length1":18,"length2":16}]],"length":3424,"saved":false}
{"ts":1370960470230,"patch":[[{"diffs":[[0,"rr, user) {\n"],[-1,"    "],[1,"\t"],[0,"\tdebug(\"user"]],"start1":1359,"start2":1359,"length1":28,"length2":25}]],"length":3421,"saved":false}
{"ts":1370960483135,"patch":[[{"diffs":[[0,"  if (err) {"],[1," debug(\"username:\"+username);"],[0," return done"]],"start1":1408,"start2":1408,"length1":24,"length2":53}]],"length":3450,"saved":false}
{"ts":1370960485167,"patch":[[{"diffs":[[0,"ername:\""],[-1,"+username"],[0,"); retur"]],"start1":1430,"start2":1430,"length1":25,"length2":16}]],"length":3441,"saved":false}
{"ts":1370960488397,"patch":[[{"diffs":[[0," debug(\""],[-1,"username"],[1,"error"],[0,":\"); ret"]],"start1":1420,"start2":1420,"length1":24,"length2":21}]],"length":3438,"saved":false}
{"ts":1370960490697,"patch":[[{"diffs":[[0,"\"error:\""],[1,"+err"],[0,"); retur"]],"start1":1427,"start2":1427,"length1":16,"length2":20}]],"length":3442,"saved":false}
{"ts":1370960495797,"patch":[[{"diffs":[[0,"!user) {"],[1," debug(\"username:\"+username);"],[0," return "]],"start1":1474,"start2":1474,"length1":16,"length2":45}]],"length":3471,"saved":false}
{"ts":1370960500788,"patch":[[{"diffs":[[0,"ername:\""],[-1,"+username"],[0,"); retur"]],"start1":1492,"start2":1492,"length1":25,"length2":16}]],"length":3462,"saved":false}
{"ts":1370960503876,"patch":[[{"diffs":[[0,"ug(\"user"],[-1,"name:"],[1," un"],[0,"\"); retu"]],"start1":1486,"start2":1486,"length1":21,"length2":19}]],"length":3460,"saved":false}
{"ts":1370960505899,"patch":[[{"diffs":[[0,"\"user un"],[1,"known"],[0,"\"); retu"]],"start1":1489,"start2":1489,"length1":16,"length2":21}]],"length":3465,"saved":false}
{"ts":1370960509672,"patch":[[{"diffs":[[0,"sword) {"],[1,"debug(\"username:\"+username); "],[0," return "]],"start1":1607,"start2":1607,"length1":16,"length2":45}]],"length":3494,"saved":false}
{"ts":1370960511600,"patch":[[{"diffs":[[0,"ername:\""],[-1,"+username"],[0,");  retu"]],"start1":1624,"start2":1624,"length1":25,"length2":16}]],"length":3485,"saved":false}
{"ts":1370960516184,"patch":[[{"diffs":[[0,"{debug(\""],[-1,"username:"],[1,"wrong password"],[0,"\");  ret"]],"start1":1614,"start2":1614,"length1":25,"length2":30}]],"length":3490,"saved":false}
{"ts":1370960775677,"patch":[[{"diffs":[[0,"rategy(\n"],[1,"\tdebug()\n"],[0,"  functi"]],"start1":928,"start2":928,"length1":16,"length2":25}]],"length":3499,"saved":false}
{"ts":1370960776161,"patch":[[{"diffs":[[0,"\n\tdebug("],[1,"\"\""],[0,")\n  func"]],"start1":935,"start2":935,"length1":16,"length2":18}]],"length":3501,"saved":false}
{"ts":1370960779387,"patch":[[{"diffs":[[0,"\tdebug(\""],[1,"use Local Strate"],[0,"\")\n  fun"]],"start1":936,"start2":936,"length1":16,"length2":32}]],"length":3517,"saved":false}
{"ts":1370960780663,"patch":[[{"diffs":[[0,"l Strate"],[1,"gy"],[0,"\")\n  fun"]],"start1":952,"start2":952,"length1":16,"length2":18}]],"length":3519,"saved":false}
{"ts":1370960783433,"patch":[[{"diffs":[[0,"rategy\")"],[1,";"],[0,"\n  funct"]],"start1":956,"start2":956,"length1":16,"length2":17}]],"length":3520,"saved":false}
{"ts":1370960793947,"patch":[[{"diffs":[[0,"y(\n\t"],[-1,"debug(\"use Local Strategy\");"],[0,"\n  f"]],"start1":933,"start2":933,"length1":36,"length2":8}]],"length":3492,"saved":false}
{"ts":1370960795635,"patch":[[{"diffs":[[0,"rd, done) {\n"],[1,"  \t\n"],[0,"    // async"]],"start1":965,"start2":965,"length1":24,"length2":28}]],"length":3496,"saved":false}
{"ts":1370960797285,"patch":[[{"diffs":[[0,"e) {\n  \t"],[1,"debug(\"use Local Strategy\");"],[0,"\n    // "]],"start1":972,"start2":972,"length1":16,"length2":44}]],"length":3524,"saved":false}
{"ts":1370960812596,"patch":[[{"diffs":[[0," Use the"],[-1," "],[0,"LocalStr"]],"start1":581,"start2":581,"length1":17,"length2":16},{"diffs":[[0,"trategy "],[1," "],[0,"within P"]],"start1":595,"start2":595,"length1":16,"length2":17}]],"length":3524,"saved":false}
{"ts":1370960814271,"patch":[[{"diffs":[[0," Use the"],[1," "],[0,"LocalStr"]],"start1":581,"start2":581,"length1":16,"length2":17},{"diffs":[[0,"trategy "],[-1," "],[0,"within P"]],"start1":596,"start2":596,"length1":17,"length2":16}]],"length":3524,"saved":false}
{"ts":1370960815329,"patch":[[{"diffs":[[0," Use the"],[-1," "],[0,"LocalStr"]],"start1":581,"start2":581,"length1":17,"length2":16},{"diffs":[[0,"trategy "],[1," "],[0,"within P"]],"start1":595,"start2":595,"length1":16,"length2":17}]],"length":3524,"saved":false}
{"ts":1370960816871,"patch":[[{"diffs":[[0," Use the"],[1," "],[0,"LocalStr"]],"start1":581,"start2":581,"length1":16,"length2":17},{"diffs":[[0,"trategy "],[-1," "],[0,"within P"]],"start1":596,"start2":596,"length1":17,"length2":16}]],"length":3524,"saved":false}
{"ts":1370960948921,"patch":[[{"diffs":[[0,"tialize());\n"],[1,"        self.use(passport.session());\n"],[0,"        // E"]],"start1":2929,"start2":2929,"length1":24,"length2":62}]],"length":3562,"saved":false}
{"ts":1370961053030,"patch":[[{"diffs":[[0," () {\n      "],[1,"deb"],[0,"\n      // Fi"]],"start1":1086,"start2":1086,"length1":24,"length2":27}]],"length":3565,"saved":false}
{"ts":1370961054516,"patch":[[{"diffs":[[0,"     deb"],[1,"ug"],[0,"\n      /"]],"start1":1093,"start2":1093,"length1":16,"length2":18}]],"length":3567,"saved":false}
{"ts":1370961056043,"patch":[[{"diffs":[[0,"   debug"],[1,"(\"\")"],[0,"\n      /"]],"start1":1095,"start2":1095,"length1":16,"length2":20}]],"length":3571,"saved":false}
{"ts":1370961058499,"patch":[[{"diffs":[[0," debug(\""],[1,"next tick"],[0,"\")\n     "]],"start1":1097,"start2":1097,"length1":16,"length2":25}]],"length":3580,"saved":false}
{"ts":1370961059636,"patch":[[{"diffs":[[0,"t tick\")"],[1,";"],[0,"\n      /"]],"start1":1108,"start2":1108,"length1":16,"length2":17}]],"length":3581,"saved":false}
{"ts":1370965336302,"patch":[[{"diffs":[[0,"tialize("],[1,"'l'"],[0,"));\n    "]],"start1":2948,"start2":2948,"length1":16,"length2":19}]],"length":3584,"saved":false}
{"ts":1370965337855,"patch":[[{"diffs":[[0,"alize('l"],[1,"ocal"],[0,"'));\n   "]],"start1":2950,"start2":2950,"length1":16,"length2":20}]],"length":3588,"saved":false}
{"ts":1370965480667,"patch":[[{"diffs":[[0,"\n}\n\n"],[-1,"// Use the LocalStrategy within Passport.\n// Strategies in passport require a `verify` function, which accept\n// credentials (in this case, a username and password), and invoke a callback\n// with a user object. In the real world, this would query a database;\n// however, in this example we are using a baked-in set of users.\npassport.use(new LocalStrategy(\n\t\n  function(username, password, done) {\n  \tdebug(\"use Local Strategy\");\n    // asynchronous verification, for effect...\n    process.nextTick(function () {\n      debug(\"next tick\");\n      // Find the user by username. If there is no user with the given\n      // username, or the password is not correct, set the user to `false` to\n      // indicate failure and set a flash message. Otherwise, return the\n      // authenticated `user`.\n      findByUsername(username, function(err, user) {\n\t\tdebug(\"username:\"+username);\n        if (err) { debug(\"error:\"+err); return done(err); }\n        if (!user) { debug(\"user unknown\"); return done(null, false, { message: 'Unknown user ' + username }); }\n        if (user.password != password) {debug(\"wrong password\");  return done(null, false, { message: 'Invalid password' }); }\n        return done(null, user);\n      })\n    });\n  }\n));\n"],[0,"\n// "]],"start1":575,"start2":575,"length1":1242,"length2":8}]],"length":2354,"saved":false}
{"ts":1370965490158,"patch":[[{"diffs":[[0,"me, '..');\n    \n"],[1,"// Use the LocalStrategy within Passport.\n// Strategies in passport require a `verify` function, which accept\n// credentials (in this case, a username and password), and invoke a callback\n// with a user object. In the real world, this would query a database;\n// however, in this example we are using a baked-in set of users.\npassport.use(new LocalStrategy(\n\t\n  function(username, password, done) {\n  \tdebug(\"use Local Strategy\");\n    // asynchronous verification, for effect...\n    process.nextTick(function () {\n      debug(\"next tick\");\n      // Find the user by username. If there is no user with the given\n      // username, or the password is not correct, set the user to `false` to\n      // indicate failure and set a flash message. Otherwise, return the\n      // authenticated `user`.\n      findByUsername(username, function(err, user) {\n\t\tdebug(\"username:\"+username);\n        if (err) { debug(\"error:\"+err); return done(err); }\n        if (!user) { debug(\"user unknown\"); return done(null, false, { message: 'Unknown user ' + username }); }\n        if (user.password != password) {debug(\"wrong password\");  return done(null, false, { message: 'Invalid password' }); }\n        return done(null, user);\n      })\n    });\n  }\n));\n    \n"],[0,"    this.configu"]],"start1":860,"start2":860,"length1":32,"length2":1271}]],"length":3593,"saved":false}
{"ts":1370965496373,"patch":[[{"diffs":[[0," users.\n"],[1,"\t"],[0,"passport"]],"start1":1193,"start2":1193,"length1":16,"length2":17},{"diffs":[[0,"ategy(\n\t"],[-1,"\n"],[1,"\t\n\t"],[0,"  functi"]],"start1":1227,"start2":1227,"length1":17,"length2":19},{"diffs":[[0,"done) {\n"],[1,"\t"],[0,"  \tdebug"]],"start1":1269,"start2":1269,"length1":16,"length2":17},{"diffs":[[0,"Strategy\");\n"],[1,"\t"],[0,"    // async"]],"start1":1298,"start2":1298,"length1":24,"length2":25},{"diffs":[[0,"fect...\n"],[1,"\t"],[0,"    proc"]],"start1":1351,"start2":1351,"length1":16,"length2":17},{"diffs":[[0,"nction () {\n"],[1,"\t"],[0,"      debug("]],"start1":1383,"start2":1383,"length1":24,"length2":25},{"diffs":[[0,"ext tick\");\n"],[1,"\t"],[0,"      // Fin"]],"start1":1410,"start2":1410,"length1":24,"length2":25},{"diffs":[[0,"e given\n"],[1,"\t"],[0,"      //"]],"start1":1486,"start2":1486,"length1":16,"length2":17},{"diffs":[[0,"lse` to\n"],[1,"\t"],[0,"      //"]],"start1":1565,"start2":1565,"length1":16,"length2":17},{"diffs":[[0,"urn the\n"],[1,"\t"],[0,"      //"]],"start1":1639,"start2":1639,"length1":16,"length2":17},{"diffs":[[0,"`user`.\n"],[1,"\t"],[0,"      fi"]],"start1":1671,"start2":1671,"length1":16,"length2":17},{"diffs":[[0,"er) {\n\t\t"],[1,"\t"],[0,"debug(\"u"]],"start1":1727,"start2":1727,"length1":16,"length2":17},{"diffs":[[0,"rname);\n"],[1,"\t"],[0,"        "]],"start1":1757,"start2":1757,"length1":16,"length2":17},{"diffs":[[0,"one(err); }\n"],[1,"\t"],[0,"        if ("]],"start1":1814,"start2":1814,"length1":24,"length2":25},{"diffs":[[0,"rname }); }\n"],[1,"\t"],[0,"        if ("]],"start1":1928,"start2":1928,"length1":24,"length2":25},{"diffs":[[0,"' }); }\n"],[1,"\t"],[0,"        "]],"start1":2060,"start2":2060,"length1":16,"length2":17},{"diffs":[[0,"ull, user);\n"],[1,"\t"],[0,"      })\n   "]],"start1":2090,"start2":2090,"length1":24,"length2":25},{"diffs":[[0," })\n"],[1,"\t"],[0,"    });\n"],[1,"\t"],[0,"  }\n"],[1,"\t"],[0,"));\n"]],"start1":2108,"start2":2108,"length1":20,"length2":23}]],"length":3614,"saved":false}
{"ts":1370966272759,"patch":[[{"diffs":[[0,"cal'));\n        "],[1,"//"],[0,"self.use(passpor"]],"start1":2985,"start2":2985,"length1":32,"length2":34}]],"length":3616,"saved":false}
{"ts":1370966480948,"patch":[[{"diffs":[[0,"ize("],[-1,"'local')"],[0,");\n "]],"start1":2978,"start2":2978,"length1":16,"length2":8}]],"length":3608,"saved":false}
{"ts":1370966487104,"patch":[[{"diffs":[[0,"ialize()"],[1,")"],[0,";\n      "]],"start1":2975,"start2":2975,"length1":16,"length2":17}]],"length":3609,"saved":false}
{"contributors":[],"silentsave":true,"ts":1371548516226,"patch":[[{"diffs":[[0,"y;\n\n"],[-1,"var users = [{ id: 1, username: 'slelann', password: 'satanas', email: 'bob@example.com' }];\n\nfunction findByUsername(username, fn) {\n\tdebug(\"findByUsername:\"+username);\n  for (var i = 0, len = users.length; i < len; i++) {\n    var user = users[i];\n    if (user.username === username) {\n    \tdebug(\"username found\");\n      return fn(null, user);\n    }\n  }\n  return fn(null, null);\n}\n\n\n// Export nothing, only extend express' HTTPServer with an \"applyConfiguration\" method\n// (extend HTTPSServer if https is used). Will NOT work with Express 3.0.\nexpress.HTTPServer.prototype.applyConfiguration = function () {\n    var self = this,\n    rootDir = path.resolve(__dirname, '..');\n    \n// Use the LocalStrategy within Passport.\n// Strategies in passport require a `verify` function, which accept\n// credentials (in this case, a username and password), and invoke a callback\n// with a user object. In the real world, this would query a database;\n// however, in this example we are using a baked-in set of users.\n\tpassport.use(new LocalStrategy(\n\t\t\n\t  function(username, password, done) {\n\t  \tdebug(\"use Local Strategy\");\n\t    // asynchronous verification, for effect...\n\t    process.nextTick(function () {\n\t      debug(\"next tick\");\n\t      // Find the user by username. If there is no user with the given\n\t      // username, or the password is not correct, set the user to `false` to\n\t      // indicate failure and set a flash message. Otherwise, return the\n\t      // authenticated `user`.\n\t      findByUsername(username, function(err, user) {\n\t\t\tdebug(\"username:\"+username);\n\t        if (err) { debug(\"error:\"+err); return done(err); }\n\t        if (!user) { debug(\"user unknown\"); return done(null, false, { message: 'Unknown user ' + username }); }\n\t        if (user.password != password) {debug(\"wrong password\");  return done(null, false, { message: 'Invalid password' }); }\n\t        return done(null, user);\n\t      })\n\t    });\n\t  }\n\t));"],[1,"\n\n\n// Export nothing, only extend express' HTTPServer with an \"applyConfiguration\" method\n// (extend HTTPSServer if https is used). Will NOT work with Express 3.0.\nexpress.HTTPServer.prototype.applyConfiguration = function () {\n    var self = this,\n    rootDir = path.resolve(__dirname, '..');\n    "],[0,"\n   "]],"start1":191,"start2":191,"length1":1943,"length2":306},{"diffs":[[0,"        "],[-1,"//"],[0,""],[1,""],[0,"self.use"]],"start1":1349,"start2":1349,"length1":18,"length2":16}]],"length":1970,"saved":false}
{"ts":1371548878626,"patch":[[{"diffs":[[0,"ategy;\n\n"],[-1,"\n\n\n"],[0,"// Expor"]],"start1":187,"start2":187,"length1":19,"length2":16}]],"length":1967,"saved":false}
{"contributors":[],"silentsave":true,"ts":1371565504485,"patch":[[{"diffs":[[0,"re('path'),\n"],[1,"    flash = require('connect-flash')\n"],[0,"    express "]],"start1":56,"start2":56,"length1":24,"length2":61}]],"length":2004,"saved":false}
{"ts":1371565507251,"patch":[[{"diffs":[[0,"-flash')"],[1,","],[0,"\n    exp"]],"start1":96,"start2":96,"length1":16,"length2":17}]],"length":2005,"saved":false}
{"ts":1371565539149,"patch":[[{"diffs":[[0,"!' }));\n        "],[1,"app.use(flash());"],[0,"self.use(passpor"]],"start1":1335,"start2":1335,"length1":32,"length2":49}]],"length":2022,"saved":false}
{"ts":1371565540289,"patch":[[{"diffs":[[0,"lash());"],[1,"\n        "],[0,"self.use"]],"start1":1360,"start2":1360,"length1":16,"length2":25}]],"length":2031,"saved":false}
{"ts":1371565543374,"patch":[[{"diffs":[[0,"        "],[-1,"app"],[1,"self"],[0,".use(fla"]],"start1":1343,"start2":1343,"length1":19,"length2":20}]],"length":2032,"saved":false}
{"contributors":[],"silentsave":true,"ts":1371647853105,"patch":[[{"diffs":[[0,"re('path'),\n"],[1,"//"],[0,"    flash = "]],"start1":56,"start2":56,"length1":24,"length2":26},{"diffs":[[0,"ally!' }));\n"],[1,"//"],[0,"        self"]],"start1":1333,"start2":1333,"length1":24,"length2":26},{"diffs":[[0,"/public'));\n"],[1,"        \n"],[0,"    });\n    "]],"start1":1621,"start2":1621,"length1":24,"length2":33}]],"length":2045,"saved":false}
{"ts":1371647855114,"patch":[[{"diffs":[[0,");\n        \n"],[1,"        self\n"],[0,"    });\n    "]],"start1":1630,"start2":1630,"length1":24,"length2":37}]],"length":2058,"saved":false}
{"ts":1371647858574,"patch":[[{"diffs":[[0,"    self"],[1,".use()"],[0,"\n    });"]],"start1":1646,"start2":1646,"length1":16,"length2":22}]],"length":2064,"saved":false}
{"ts":1371647860311,"patch":[[{"diffs":[[0,"lf.use()"],[1,";\n        "],[0,"\n    });"]],"start1":1652,"start2":1652,"length1":16,"length2":26}]],"length":2074,"saved":false}
{"ts":1371647863623,"patch":[[{"diffs":[[0,"elf.use("],[1,"\n        \t"],[0,");\n     "]],"start1":1651,"start2":1651,"length1":16,"length2":26}]],"length":2084,"saved":false}
{"ts":1371647877106,"patch":[[{"diffs":[[0,"Strategy"],[1,",\n    passport = require('passport'),\n    "],[0,";\n\n// Ex"]],"start1":224,"start2":224,"length1":16,"length2":58}]],"length":2126,"saved":false}
{"ts":1371647879319,"patch":[[{"diffs":[[0,"('passport')"],[-1,","],[0,"\n    ;\n\n// E"]],"start1":256,"start2":256,"length1":25,"length2":24}]],"length":2125,"saved":false}
{"ts":1371647883503,"patch":[[{"diffs":[[0,"gy,\n    passport"],[1,"cfg"],[0," = require('pass"]],"start1":230,"start2":230,"length1":32,"length2":35}]],"length":2128,"saved":false}
{"ts":1371647889457,"patch":[[{"diffs":[[0,"tcfg = require('"],[1,"./"],[0,"passport')\n    ;"]],"start1":245,"start2":245,"length1":32,"length2":34}]],"length":2130,"saved":false}
{"ts":1371647893777,"patch":[[{"diffs":[[0,"passport"],[1,"cfg"],[0,"')\n    ;"]],"start1":263,"start2":263,"length1":16,"length2":19}]],"length":2133,"saved":false}
{"ts":1371647902079,"patch":[[{"diffs":[[0,"'),\n"],[-1,"    LocalStrategy = require('passport-local').Strategy,\n"],[0,"    "]],"start1":174,"start2":174,"length1":64,"length2":8}]],"length":2077,"saved":false}
{"ts":1371647905727,"patch":[[{"diffs":[[0,"elf.use("],[1,"passportcfg"],[0,"\n       "]],"start1":1644,"start2":1644,"length1":16,"length2":27}]],"length":2088,"saved":false}
{"ts":1371647914885,"patch":[[{"diffs":[[0,"sportcfg"],[1,")"],[0,"\n       "]],"start1":1655,"start2":1655,"length1":16,"length2":17}]],"length":2089,"saved":false}
{"ts":1371647920079,"patch":[[{"diffs":[[0,"portcfg)"],[1,";"],[0,"\n       "]],"start1":1656,"start2":1656,"length1":16,"length2":17}]],"length":2090,"saved":false}
{"ts":1371647922214,"patch":[[{"diffs":[[0,"g);\n"],[-1,"        \t);\n"],[0,"    "]],"start1":1662,"start2":1662,"length1":20,"length2":8}]],"length":2078,"saved":false}
{"ts":1371648448347,"patch":[[{"diffs":[[0,"    "],[-1," \n        self.use(passportcfg);"],[0,"\n   "]],"start1":1629,"start2":1629,"length1":40,"length2":8}]],"length":2046,"saved":false}
{"ts":1371648450347,"patch":[[{"diffs":[[0,"lic'));\n"],[-1,"       "],[0,"\n       "]],"start1":1618,"start2":1618,"length1":23,"length2":16}]],"length":2039,"saved":false}
{"ts":1371648450921,"patch":[[{"diffs":[[0,"lic'));\n"],[-1,"\n"],[0,"        "]],"start1":1618,"start2":1618,"length1":17,"length2":16}]],"length":2038,"saved":false}
{"ts":1371648456477,"patch":[[{"diffs":[[0,"rt')"],[-1,",\n    passportcfg = require('./passportcfg')"],[0,"\n   "]],"start1":172,"start2":172,"length1":52,"length2":8}]],"length":1994,"saved":false}
{"contributors":[],"silentsave":true,"ts":1371650037721,"patch":[[{"diffs":[[0,"));\n"],[-1,"//        self.use(flash());\n"],[0,"    "]],"start1":1290,"start2":1290,"length1":37,"length2":8}]],"length":1965,"saved":false}
{"ts":1371650039952,"patch":[[{"diffs":[[0,"'),\n"],[-1,"//    flash = require('connect-flash'),\n"],[0,"    "]],"start1":64,"start2":64,"length1":48,"length2":8}]],"length":1925,"saved":false}
{"ts":1371650043531,"patch":[[{"diffs":[[0,"ssport')"],[-1,"\n   "],[0," ;\n\n// E"]],"start1":128,"start2":128,"length1":20,"length2":16}]],"length":1921,"saved":false}
{"ts":1371650043968,"patch":[[{"diffs":[[0,"ssport')"],[-1," "],[0,";\n\n// Ex"]],"start1":128,"start2":128,"length1":17,"length2":16}]],"length":1920,"saved":false}
{"ts":1371650388444,"patch":[[{"diffs":[[0,"tialize());\n"],[1,"        self.use(passport.initialize());\n"],[0,"        self"]],"start1":1278,"start2":1278,"length1":24,"length2":65}]],"length":1961,"saved":false}
{"ts":1371650402736,"patch":[[{"diffs":[[0,"elf.use("],[-1,"passport.initialize"],[1,"flash"],[0,"());\n   "]],"start1":1258,"start2":1258,"length1":35,"length2":21}]],"length":1947,"saved":false}
{"ts":1371650412133,"patch":[[{"diffs":[[0,"('config'),\n"],[1,"    flash = require('connect-flash'),\n"],[0,"    path = r"]],"start1":28,"start2":28,"length1":24,"length2":62}]],"length":1985,"saved":false}
{"contributors":[],"silentsave":true,"ts":1371655788678,"patch":[[{"diffs":[[0,"rt')"],[-1,";\n\n// Export nothing, only extend express' HTTPServer with an \"applyConfiguration\" method\n// (extend HTTPSServer if https is used). Will NOT work with Express 3.0.\nexpress.HTTPServer.prototype.applyConfiguration = function () {\n    var self = this,\n   "],[1,",\n    server;\n\nmodule.exports.apply = function(app) {\n\tvar"],[0," roo"]],"start1":170,"start2":170,"length1":260,"length2":66},{"diffs":[[0,";\n    \n    \n    "],[-1,"this"],[1,"app"],[0,".configure(funct"]],"start1":272,"start2":272,"length1":36,"length2":35},{"diffs":[[0," engine\n        "],[-1,"self"],[1,"app"],[0,".set('views', ro"]],"start1":415,"start2":415,"length1":36,"length2":35},{"diffs":[[0,"');\n        "],[-1,"self"],[1,"app"],[0,".set('view e"]],"start1":465,"start2":465,"length1":28,"length2":27},{"diffs":[[0,"        "],[-1,"self"],[1,"app"],[0,".set(\"vi"]],"start1":509,"start2":509,"length1":20,"length2":19},{"diffs":[[0,"he body\n        "],[-1,"self"],[1,"app"],[0,".use(express.bod"]],"start1":586,"start2":586,"length1":36,"length2":35},{"diffs":[[0," a POST\n        "],[-1,"self"],[1,"app"],[0,".use(express.met"]],"start1":721,"start2":721,"length1":36,"length2":35},{"diffs":[[0,"cookies\n        "],[-1,"self"],[1,"app"],[0,".use(express.coo"]],"start1":802,"start2":802,"length1":36,"length2":35},{"diffs":[[0,"     // "],[-1,"self"],[1,"app"],[0,".use(exp"]],"start1":937,"start2":937,"length1":20,"length2":19},{"diffs":[[0,"ET }));\n        "],[-1,"self"],[1,"app"],[0,".use(express.ses"]],"start1":1006,"start2":1006,"length1":36,"length2":35},{"diffs":[[0,"));\n        "],[-1,"self"],[1,"// app"],[0,".use(flash()"]],"start1":1080,"start2":1080,"length1":28,"length2":30},{"diffs":[[0,"ash());\n        "],[-1,"self"],[1,"// app"],[0,".use(passport.in"]],"start1":1105,"start2":1105,"length1":36,"length2":38},{"diffs":[[0,"));\n        "],[-1,"self"],[1,"// app"],[0,".use(passpor"]],"start1":1152,"start2":1152,"length1":28,"length2":30},{"diffs":[[0,"session());\n"],[1,"        \n"],[0,"        // E"]],"start1":1184,"start2":1184,"length1":24,"length2":33},{"diffs":[[0,"    "],[-1,"self"],[1,"app"],[0,".use("],[-1,"self"],[1,"app"],[0,".rou"]],"start1":1238,"start2":1238,"length1":21,"length2":19},{"diffs":[[0,"rectory\n        "],[-1,"self"],[1,"app"],[0,".use(express.sta"]],"start1":1320,"start2":1320,"length1":36,"length2":35},{"diffs":[[0,"   });\n    \n    "],[-1,"this"],[1,"app"],[0,".configure('dev'"]],"start1":1392,"start2":1392,"length1":36,"length2":35},{"diffs":[[0,"n...');\n        "],[-1,"self"],[1,"app"],[0,".use(express.log"]],"start1":1487,"start2":1487,"length1":36,"length2":35},{"diffs":[[0,"iny'));\n        "],[-1,"self"],[1,"app"],[0,".use(express.err"]],"start1":1528,"start2":1528,"length1":36,"length2":35},{"diffs":[[0,"    "],[-1,"this"],[1,"app"],[0,".con"]],"start1":1631,"start2":1631,"length1":12,"length2":11},{"diffs":[[0,"    "],[-1,"self"],[1,"app"],[0,".use"]],"start1":1740,"start2":1740,"length1":12,"length2":11}]],"length":1789,"saved":false}
{"ts":1371655790652,"patch":[[{"diffs":[[0,"session());\n"],[1,"app.use(function(req, res, next){\n  var err = req.session.error\n    , msg = req.session.success;\n  delete req.session.error;\n  delete req.session.success;\n  res.locals.message = '';\n  if (err) res.locals.message = '<p class=\"msg error\">' + err + '</p>';\n  if (msg) res.locals.message = '<p class=\"msg success\">' + msg + '</p>';\n  next();\n});"],[0,"        \n   "]],"start1":1184,"start2":1184,"length1":24,"length2":365}]],"length":2130,"saved":false}
{"ts":1371655792109,"patch":[[{"diffs":[[0,"t();\n});"],[-1,"        "],[1,"\n"],[0,"\n       "]],"start1":1529,"start2":1529,"length1":24,"length2":17}]],"length":2123,"saved":false}
{"ts":1371655795098,"patch":[[{"diffs":[[0,"ion());\n"],[1,"\t\t"],[0,"app.use("]],"start1":1188,"start2":1188,"length1":16,"length2":18},{"diffs":[[0," next){\n"],[1,"\t\t"],[0,"  var er"]],"start1":1224,"start2":1224,"length1":16,"length2":18},{"diffs":[[0,"n.error\n"],[1,"\t\t"],[0,"    , ms"]],"start1":1256,"start2":1256,"length1":16,"length2":18},{"diffs":[[0,"uccess;\n"],[1,"\t\t"],[0,"  delete"]],"start1":1291,"start2":1291,"length1":16,"length2":18},{"diffs":[[0,".error;\n"],[1,"\t\t"],[0,"  delete"]],"start1":1321,"start2":1321,"length1":16,"length2":18},{"diffs":[[0,"uccess;\n"],[1,"\t\t"],[0,"  res.lo"]],"start1":1353,"start2":1353,"length1":16,"length2":18},{"diffs":[[0,"e = '';\n"],[1,"\t\t"],[0,"  if (er"]],"start1":1382,"start2":1382,"length1":16,"length2":18},{"diffs":[[0,"'</p>';\n"],[1,"\t\t"],[0,"  if (ms"]],"start1":1456,"start2":1456,"length1":16,"length2":18},{"diffs":[[0,"'</p>';\n"],[1,"\t\t"],[0,"  next()"]],"start1":1532,"start2":1532,"length1":16,"length2":18},{"diffs":[[0,"next();\n"],[1,"\t\t"],[0,"});\n\n   "]],"start1":1544,"start2":1544,"length1":16,"length2":18}]],"length":2143,"saved":false}
{"ts":1371655795529,"patch":[[{"diffs":[[0,"ion());\n"],[1,"        \n"],[0,"\t\tapp.us"]],"start1":1188,"start2":1188,"length1":16,"length2":25}]],"length":2152,"saved":false}
{"ts":1371655934216,"patch":[[{"diffs":[[0,"!' }));\n        "],[-1,"//"],[0," app.use(flash()"]],"start1":1076,"start2":1076,"length1":34,"length2":32}]],"length":2150,"saved":false}
{"ts":1371655947108,"patch":[[{"diffs":[[0,"));\n        "],[-1," "],[0,"app.use(flas"]],"start1":1080,"start2":1080,"length1":25,"length2":24}]],"length":2149,"saved":false}
{"contributors":[],"silentsave":false,"ts":1376041698503,"patch":[[{"diffs":[[0,"'),\n"],[-1,"    passport = require('passport'),\n"],[0,"    "]],"start1":136,"start2":136,"length1":44,"length2":8},{"diffs":[[0,"));\n"],[-1,"        // app.use(passport.initialize());\n        // app.use(passport.session());\n"],[0,"    "]],"start1":1070,"start2":1070,"length1":91,"length2":8},{"diffs":[[0,"ext){\n\t\t"],[-1,"  "],[1,"\t"],[0,"var err "]],"start1":1113,"start2":1113,"length1":18,"length2":17},{"diffs":[[0,"rror"],[1,","],[0,"\n\t\t"],[-1,"    , "],[1,"\t\t"],[0,"msg "]],"start1":1145,"start2":1145,"length1":17,"length2":14},{"diffs":[[0,".success;\n\t\t"],[1,"\t"],[-1,"  "],[0,"delete req.s"]],"start1":1172,"start2":1172,"length1":26,"length2":25},{"diffs":[[0,"rror;\n\t\t"],[-1,"  "],[1,"\t"],[0,"delete r"]],"start1":1205,"start2":1205,"length1":18,"length2":17},{"diffs":[[0,"cess;\n\t\t"],[-1,"  "],[1,"\t"],[0,"res.loca"]],"start1":1236,"start2":1236,"length1":18,"length2":17},{"diffs":[[0,"age = '';\n\t\t"],[-1,"  "],[1,"\t"],[0,"if (err) res"]],"start1":1260,"start2":1260,"length1":26,"length2":25},{"diffs":[[0,"/p>';\n\t\t"],[-1,"  "],[1,"\t"],[0,"if (msg)"]],"start1":1337,"start2":1337,"length1":18,"length2":17},{"diffs":[[0,"/p>';\n\t\t"],[-1,"  "],[1,"\t"],[0,"next();\n"]],"start1":1412,"start2":1412,"length1":18,"length2":17}]],"length":2020,"saved":false}
{"contributors":[],"silentsave":true,"ts":1376049628004,"patch":[[{"diffs":[[0,"Override());"],[1,"ps -ef "],[0,"\n        \n  "]],"start1":723,"start2":723,"length1":24,"length2":31}]],"length":2027,"saved":false}
{"ts":1376049631496,"patch":[[{"diffs":[[0,"());"],[-1,"ps -ef "],[0,"\n   "]],"start1":731,"start2":731,"length1":15,"length2":8}]],"length":2020,"saved":false}
