{"ts":1380124816909,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"var debug = require('debug')('db');\nvar mongoose = require('mongoose');\nvar Schema = require('mongoose').Schema;\nvar mongolabdb;\nvar WineSchema, Wine;\nvar util = require(\"util\");\n\nvar uristring = process.env.MONGOLAB_URI || 'mongodb://slelann:satanas@ds041218.mongolab.com:41218/heroku_app15653280';\n// Bootstrap db connection\nmongoose.connect(uristring);\nmongolabdb = mongoose.connection;\n//Events management\nmongolabdb.on('error', function (err) {\n\tdebug('connection error:' + err);\n});\nmongolabdb.on('close', function () {\n\tdebug('connection closed');\n});\nmongolabdb.once('open', function (callback) {\n\tdebug('Connected to mongolab db...');\n\tinitSchema();\n\t//mongolabdb.close();\n});\n\n\n/**\n * Init Wine Schema\n */\n\nfunction initSchema() {\n\n\tWineSchema = new Schema({\n\t\tiWine: {type : String, default : '', trim : true},\n\t\tquantity: {type : Number, default : 0, trim : true},\n\t\tlocation: {type : String, default : '', trim : true},\n\t\tbin: {type : String, default : '', trim : true},\n\t\tsize: {type : String, default : '', trim : true},\n\t\tprice: {type : Number, default : 0, trim : true},\n\t\tvintage: {type : String, default : '', trim : true},\n\t\twine: {type : String, default : '', trim : true},\n\t\tlocale: {type : String, default : '', trim : true},\n\t\tcountry: {type : String, default : '', trim : true},\n\t\tregion: {type : String, default : '', trim : true},\n\t\tsubRegion: {type : String, default : '', trim : true},\n\t\tappellation: {type : String, default : '', trim : true},\n\t\tproducer: {type : String, default : '', trim : true},\n\t\tsortProducer: {type : String, default : '', trim : true},\n\t\ttype: {type : String, default : '', trim : true},\n\t\tvarietal: {type : String, default : '', trim : true},\n\t\tmasterVarietal: {type : String, default : '', trim : true},\n\t\tdesignation: {type : String, default : '', trim : true},\n\t\tvineyard: {type : String, default : '', trim : true},\n\t\tctNote: {type : Number, default : 0, trim : true},\n\t\tbeginConsume: {type : String, trim : true},\n\t\tendConsume: {type : String, trim : true},\n\t\tcreatedAt  : {type : Date, default : Date.now}\n\t\t});\n\n\tWine = mongoose.model('Wine', WineSchema);\n}\n\nfunction saveWine(ctwine) {\n\tconsole.log('saveWine');\n\tvar Wine = mongoose.model('Wine');\n\tvar options = { upsert: true };\n\tvar update = {  iWine: ctwine.iWine,\n\t\t\t\t\tquantity: ctwine.Quantity,\n\t\t\t\t\tlocation: ctwine.Location,\n\t\t\t\t\tbin: ctwine.Bin,\n\t\t\t\t\tsize: ctwine.Size,\n\t\t\t\t\tprice: ctwine.Price,\n\t\t\t\t\tvintage: ctwine.Vintage,\n\t\t\t\t\twine: ctwine.Wine,\n\t\t\t\t\tlocale: ctwine.Locale,\n\t\t\t\t\tcountry: ctwine.Country,\n\t\t\t\t\tregion: ctwine.Region,\n\t\t\t\t\tsubRegion: ctwine.SubRegion,\n\t\t\t\t\tappellation: ctwine.Appellation,\n\t\t\t\t\tproducer: ctwine.Producer,\n\t\t\t\t\ttype: ctwine.Type,\n\t\t\t\t\tvarietal: ctwine.Varietal,\n\t\t\t\t\tmasterVarietal: ctwine.MasterVarietal,\n\t\t\t\t\tdesignation: ctwine.Designation,\n\t\t\t\t\tvineyard: ctwine.Vineyard,\n\t\t\t\t\tbeginConsume: ctwine.BeginConsume,\n\t\t\t\t\tendConsume: ctwine.EndConsume,\n\t\t\t\t\tctNote: ctwine.CT\n\t\t\t\t\t};\n\n\tWine.findOneAndUpdate({ iWine: ctwine.iWine }, update, options, function (err, wine) {\n\t\twine.save(function (err) {\n\t\t\tif (err) {\n\t\t\t\tconsole.log('error:'+err);\n\t\t\t\tconsole.log(util.inspect(ctwine));\n\t\t\t}\n\t\t});\n\t});\n\n}\n\nfunction getWinesByCountry() {\n    debug(\"--getWinesByCountry\")\n\t//initSchema();\n\t//Wine = mongoose.model('Wine');\n\tvar stats;\n\n    // Wine.find(\n    //         {},\n    //         function(err, docs) {\n    //         if (!err){\n    //           console.log(docs);\n    //           process.exit();\n    //                   }\n    //         else { throw err;}\n\n    //         }\n    // );\n\n\tWine.aggregate([\n        { $group: {\n            _id: '$country',\n            sum: { $sum: '$quantity'}\n        }}\n    ], function (err, results) {\n        if (err) {\n            console.error(err);\n        } else {\n            debug(\"countries:\"+results);\n\t\t\treturn results;\n        }\n    });\n    return undefined;\n}\n\nfunction getWinesByType(cb) {\n\t//initSchema();\n\t//Wine = mongoose.model('Wine');\n\tvar stats;\n\n\tWine.aggregate([\n        { $group: {\n            _id: '$type',\n            sum: { $sum: '$quantity'}\n        }}\n    ], function (err, results) {\n        if (err) {\n            console.error(err);\n        } else {\n\t\t\treturn results;\n        }\n    });\n\treturn undefined;\n}\n\nfunction getWinesByVintage() {\n\t//initSchema();\n\t//Wine = mongoose.model('Wine');\n\tvar stats;\n\n\tWine.aggregate([\n        { $group: {\n            _id: '$vintage',\n            sum: { $sum: '$quantity'}\n        }}\n    ], function (err, results) {\n        if (err) {\n            console.error(err);\n        } else {\n\t\t\treturn results;\n        }\n    });\n\n\treturn undefined;\n\n}\n\nmodule.exports.saveWine = saveWine;\nmodule.exports.getWinesByCountry = getWinesByCountry;\nmodule.exports.getWinesByType = getWinesByType;\nmodule.exports.getWinesByVintage = getWinesByVintage;\n"]],"start1":0,"start2":0,"length1":0,"length2":4800}]],"length":4800}
{"contributors":[],"silentsave":true,"ts":1380124829567,"patch":[[{"diffs":[[0,";\n\n\n"],[-1,"/**\n * Init Wine Schema\n */\n\nfunction initSchema() {\n\n\tWineSchema = new Schema({\n\t\tiWine: {type : String, default : '', trim : true},\n\t\tquantity: {type : Number, default : 0, trim : true},\n\t\tlocation: {type : String, default : '', trim : true},\n\t\tbin: {type : String, default : '', trim : true},\n\t\tsize: {type : String, default : '', trim : true},\n\t\tprice: {type : Number, default : 0, trim : true},\n\t\tvintage: {type : String, default : '', trim : true},\n\t\twine: {type : String, default : '', trim : true},\n\t\tlocale: {type : String, default : '', trim : true},\n\t\tcountry: {type : String, default : '', trim : true},\n\t\tregion: {type : String, default : '', trim : true},\n\t\tsubRegion: {type : String, default : '', trim : true},\n\t\tappellation: {type : String, default : '', trim : true},\n\t\tproducer: {type : String, default : '', trim : true},\n\t\tsortProducer: {type : String, default : '', trim : true},\n\t\ttype: {type : String, default : '', trim : true},\n\t\tvarietal: {type : String, default : '', trim : true},\n\t\tmasterVarietal: {type : String, default : '', trim : true},\n\t\tdesignation: {type : String, default : '', trim : true},\n\t\tvineyard: {type : String, default : '', trim : true},\n\t\tctNote: {type : Number, default : 0, trim : true},\n\t\tbeginConsume: {type : String, trim : true},\n\t\tendConsume: {type : String, trim : true},\n\t\tcreatedAt  : {type : Date, default : Date.now}\n\t\t});\n\n\tWine = mongoose.model('Wine', WineSchema);\n}"],[0,"\n\nfu"]],"start1":684,"start2":684,"length1":1439,"length2":8}]],"length":3369,"saved":false}
{"ts":1380124837194,"patch":[[{"diffs":[[0,"util\");\n"],[1,", Article = mongoose.model('Article')"],[0,"\nvar uri"]],"start1":171,"start2":171,"length1":16,"length2":53},{"diffs":[[0,"');\n"],[-1,"\tinitSchema();\n"],[0,"\t//m"]],"start1":677,"start2":677,"length1":23,"length2":8}]],"length":3391,"saved":false}
{"ts":1380124842452,"patch":[[{"diffs":[[0,"\nvar"],[-1," WineSchema,"],[0," Win"]],"start1":128,"start2":128,"length1":20,"length2":8}]],"length":3379,"saved":false}
{"ts":1380124847907,"patch":[[{"diffs":[[0,"\");\n"],[-1,", Article = mongoose.model('Article')"],[0,"\nvar"]],"start1":163,"start2":163,"length1":45,"length2":8}]],"length":3342,"saved":false}
{"ts":1380124850591,"patch":[[{"diffs":[[0,"var Wine"],[1," "],[0,";\nvar ut"]],"start1":129,"start2":129,"length1":16,"length2":17}]],"length":3343,"saved":false}
{"contributors":[],"silentsave":true,"ts":1380274175163,"patch":[[{"diffs":[[0,"var "],[-1,"mongoose = require('mongoose');\nvar Schema = require('mongoose').Schema;\nvar mongolabdb;\nvar Wine ;\nvar util = require(\"util\");\n\nvar uristring = process.env.MONGOLAB_URI || 'mongodb://slelann:satanas@ds041218.mongolab.com:41218/heroku_app15653280';\n// Bootstrap db conne"],[1,"util = require(\"util\");\n\nmodule.exports = fun"],[0,"ction"],[-1,"\n"],[1,"("],[0,"mongoose"],[-1,".connect(uristring);\nmongolabdb = mongoose.connection;\n//Events management\nmongolabdb.on('error', function (err) {\n\tdebug('connection error:' + err);\n});\nmongolabdb.on('close', function () {\n\tdebug('connection closed');\n});\nmongolabdb.once('open', function (callback) {\n\tdebug('Connected to mongolab db...');\n\t//mongolabdb.close();\n});\n\n\n\n\nfunction saveWine"],[1,") {\n\n\tconsole.log(\"mongodb=\");\n\n\tvar mongodb = {};\n\n\tvar Wine = mongoose.model('Wine');\n\n\tmongodb.saveWine = function"],[0,"(ctw"]],"start1":36,"start2":36,"length1":649,"length2":184},{"diffs":[[0,"wine) {\n"],[1,"\t"],[0,"\tconsole"]],"start1":219,"start2":219,"length1":16,"length2":17},{"diffs":[[0,");\n\t"],[-1,"var Wine = mongoose.model('Wine');\n"],[0,"\tvar"]],"start1":251,"start2":251,"length1":43,"length2":8},{"diffs":[[0,"true };\n"],[1,"\t"],[0,"\tvar upd"]],"start1":280,"start2":280,"length1":16,"length2":17},{"diffs":[[0,"e,\n\t\t\t\t\t"],[1,"\t"],[0,"quantity"]],"start1":324,"start2":324,"length1":16,"length2":17},{"diffs":[[0,"antity,\n"],[1,"\t"],[0,"\t\t\t\t\tloc"]],"start1":352,"start2":352,"length1":16,"length2":17},{"diffs":[[0,"n,\n\t\t\t\t\t"],[1,"\t"],[0,"bin: ctw"]],"start1":390,"start2":390,"length1":16,"length2":17},{"diffs":[[0,"ne.Bin,\n"],[1,"\t"],[0,"\t\t\t\t\tsiz"]],"start1":408,"start2":408,"length1":16,"length2":17},{"diffs":[[0,"e.Size,\n"],[1,"\t"],[0,"\t\t\t\t\tpri"]],"start1":433,"start2":433,"length1":16,"length2":17},{"diffs":[[0,"e,\n\t\t\t\t\t"],[1,"\t"],[0,"vintage:"]],"start1":465,"start2":465,"length1":16,"length2":17},{"diffs":[[0,"e,\n\t\t\t\t\t"],[1,"\t"],[0,"wine: ct"]],"start1":496,"start2":496,"length1":16,"length2":17},{"diffs":[[0,"twine.Wine,\n"],[1,"\t"],[0,"\t\t\t\t\tlocale:"]],"start1":512,"start2":512,"length1":24,"length2":25},{"diffs":[[0,"e,\n\t\t\t\t\t"],[1,"\t"],[0,"country:"]],"start1":550,"start2":550,"length1":16,"length2":17},{"diffs":[[0,"y,\n\t\t\t\t\t"],[1,"\t"],[0,"region: "]],"start1":581,"start2":581,"length1":16,"length2":17},{"diffs":[[0,"ine.Region,\n"],[1,"\t"],[0,"\t\t\t\t\tsubRegi"]],"start1":601,"start2":601,"length1":24,"length2":25},{"diffs":[[0,"n,\n\t\t\t\t\t"],[1,"\t"],[0,"appellat"]],"start1":645,"start2":645,"length1":16,"length2":17},{"diffs":[[0,"n,\n\t\t\t\t\t"],[1,"\t"],[0,"producer"]],"start1":684,"start2":684,"length1":16,"length2":17},{"diffs":[[0,"oducer,\n"],[1,"\t"],[0,"\t\t\t\t\ttyp"]],"start1":712,"start2":712,"length1":16,"length2":17},{"diffs":[[0,"e,\n\t\t\t\t\t"],[1,"\t"],[0,"varietal"]],"start1":742,"start2":742,"length1":16,"length2":17},{"diffs":[[0,"e.Varietal,\n"],[1,"\t"],[0,"\t\t\t\t\tmasterV"]],"start1":766,"start2":766,"length1":24,"length2":25},{"diffs":[[0,"l,\n\t\t\t\t\t"],[1,"\t"],[0,"designat"]],"start1":820,"start2":820,"length1":16,"length2":17},{"diffs":[[0,"n,\n\t\t\t\t\t"],[1,"\t"],[0,"vineyard"]],"start1":859,"start2":859,"length1":16,"length2":17},{"diffs":[[0,"neyard,\n"],[1,"\t"],[0,"\t\t\t\t\tbeg"]],"start1":887,"start2":887,"length1":16,"length2":17},{"diffs":[[0,"e,\n\t\t\t\t\t"],[1,"\t"],[0,"endConsu"]],"start1":933,"start2":933,"length1":16,"length2":17},{"diffs":[[0,"e,\n\t\t\t\t\t"],[1,"\t"],[0,"ctNote: "]],"start1":970,"start2":970,"length1":16,"length2":17},{"diffs":[[0,"wine.CT\n"],[1,"\t"],[0,"\t\t\t\t\t};\n"]],"start1":989,"start2":989,"length1":16,"length2":17},{"diffs":[[0,"\t\t\t\t};\n\n"],[1,"\t"],[0,"\tWine.fi"]],"start1":999,"start2":999,"length1":16,"length2":17},{"diffs":[[0,"ne) {\n\t\t"],[1,"\t"],[0,"wine.sav"]],"start1":1090,"start2":1090,"length1":16,"length2":17},{"diffs":[[0,"(err) {\n"],[1,"\t"],[0,"\t\t\tif (e"]],"start1":1118,"start2":1118,"length1":16,"length2":17},{"diffs":[[0,"(err) {\n\t\t\t\t"],[1,"\t"],[0,"console.log("]],"start1":1133,"start2":1133,"length1":24,"length2":25},{"diffs":[[0,"'+err);\n"],[1,"\t"],[0,"\t\t\t\tcons"]],"start1":1165,"start2":1165,"length1":16,"length2":17},{"diffs":[[0,"));\n"],[1,"\t"],[0,"\t\t\t}\n\t\t"],[1,"\t"],[0,"});\n"],[1,"\t"],[0,"\t});\n\n"],[-1,"}\n\nfunction "],[1,"\t};\n\n\tmongodb."],[0,"getW"]],"start1":1209,"start2":1209,"length1":37,"length2":42},{"diffs":[[0,"ntry"],[1," = function"],[0,"() {\n"],[-1,"    "],[1,"\t\t"],[0,"debu"]],"start1":1260,"start2":1260,"length1":17,"length2":26},{"diffs":[[0,"ry\")"],[-1,"\n\t//initSchema();\n\t//Wine = mongoose.model('Wine');\n\tvar stats;\n\n    "],[1,";\n\n\t\t"],[0,"// W"]],"start1":1306,"start2":1306,"length1":77,"length2":13},{"diffs":[[0,"e.find(\n"],[-1,"    "],[1,"\t\t"],[0,"//      "]],"start1":1321,"start2":1321,"length1":20,"length2":18},{"diffs":[[0,"    {},\n"],[-1,"    "],[1,"\t\t"],[0,"//      "]],"start1":1338,"start2":1338,"length1":20,"length2":18},{"diffs":[[0,"docs) {\n"],[-1,"    "],[1,"\t\t"],[0,"//      "]],"start1":1373,"start2":1373,"length1":20,"length2":18},{"diffs":[[0,"(!err){\n"],[-1,"    "],[1,"\t\t"],[0,"//      "]],"start1":1397,"start2":1397,"length1":20,"length2":18},{"diffs":[[0,"(docs);\n"],[-1,"    "],[1,"\t\t"],[0,"//      "]],"start1":1431,"start2":1431,"length1":20,"length2":18},{"diffs":[[0,"exit();\n"],[-1,"    "],[1,"\t\t"],[0,"//      "]],"start1":1462,"start2":1462,"length1":20,"length2":18},{"diffs":[[0,"      }\n"],[-1,"    "],[1,"\t\t"],[0,"//      "]],"start1":1487,"start2":1487,"length1":20,"length2":18},{"diffs":[[0," err;}\n\n"],[-1,"    "],[1,"\t\t"],[0,"//      "]],"start1":1520,"start2":1520,"length1":20,"length2":18},{"diffs":[[0,"  }\n"],[-1,"    "],[1,"\t\t"],[0,"// );\n\n"],[1,"\t"],[0,"\tWin"]],"start1":1539,"start2":1539,"length1":19,"length2":18},{"diffs":[[0,"aggregate([\n"],[-1,"        "],[1,"\t\t\t"],[0,"{ $group: {\n"]],"start1":1559,"start2":1559,"length1":32,"length2":27},{"diffs":[[0,"{ $group: {\n"],[-1,"            "],[1,"\t\t\t"],[0,"_id: '$count"]],"start1":1574,"start2":1574,"length1":36,"length2":27},{"diffs":[[0,"untry',\n"],[-1,"            "],[1,"\t\t\t"],[0,"sum: { $"]],"start1":1598,"start2":1598,"length1":28,"length2":19},{"diffs":[[0,"$quantity'}\n"],[-1,"        }}\n    "],[1,"\t\t\t}}\n\t\t"],[0,"], function "]],"start1":1623,"start2":1623,"length1":39,"length2":32},{"diffs":[[0," results) {\n"],[-1,"        "],[1,"\t\t\t"],[0,"if (err) {\n "]],"start1":1660,"start2":1660,"length1":32,"length2":27},{"diffs":[[0,"\tif (err) {\n"],[-1,"            "],[1,"\t\t\t\t"],[0,"console.erro"]],"start1":1674,"start2":1674,"length1":36,"length2":28},{"diffs":[[0,"error(err);\n"],[-1,"        "],[1,"\t\t\t"],[0,"} else {\n   "]],"start1":1698,"start2":1698,"length1":32,"length2":27},{"diffs":[[0," else {\n"],[-1,"            "],[1,"\t\t\t\t"],[0,"debug(\"c"]],"start1":1714,"start2":1714,"length1":28,"length2":20},{"diffs":[[0,"esults);\n\t\t\t"],[1,"\t"],[0,"return resul"]],"start1":1746,"start2":1746,"length1":24,"length2":25},{"diffs":[[0,"ts;\n"],[-1,"        }\n    });\n    return undefined;\n}\n\nfunction getWinesByType(cb) {\n\t//initSchema();\n\t//Wine = mongoose.model('Wine');\n\tvar stats;"],[1,"\t\t\t}\n\t\t});\n\t\treturn undefined;\n\t};\n\n\tmongodb.getWinesByType = function(cb) {"],[0,"\n\n"],[1,"\t"],[0,"\tWin"]],"start1":1771,"start2":1771,"length1":145,"length2":87},{"diffs":[[0,"aggregate([\n"],[-1,"        "],[1,"\t\t\t"],[0,"{ $group: {\n"]],"start1":1860,"start2":1860,"length1":32,"length2":27},{"diffs":[[0,"{ $group: {\n"],[-1,"            "],[1,"\t\t\t"],[0,"_id: '$type'"]],"start1":1875,"start2":1875,"length1":36,"length2":27},{"diffs":[[0,"d: '$type',\n"],[-1,"            "],[1,"\t\t\t"],[0,"sum: { $sum:"]],"start1":1892,"start2":1892,"length1":36,"length2":27},{"diffs":[[0,"$quantity'}\n"],[-1,"        }}\n    "],[1,"\t\t\t}}\n\t\t\t"],[0,"], function "]],"start1":1921,"start2":1921,"length1":39,"length2":33},{"diffs":[[0," results) {\n"],[-1,"        "],[1,"\t\t\t\t"],[0,"if (err) {\n "]],"start1":1959,"start2":1959,"length1":32,"length2":28},{"diffs":[[0,"\tif (err) {\n"],[-1,"            "],[1,"\t\t\t\t\t"],[0,"console.erro"]],"start1":1974,"start2":1974,"length1":36,"length2":29},{"diffs":[[0,"error(err);\n"],[-1,"        "],[1,"\t\t\t\t"],[0,"} else {\n\t\t\t"]],"start1":1999,"start2":1999,"length1":32,"length2":28},{"diffs":[[0,");\n\t\t\t\t} else {\n"],[1,"\t\t"],[0,"\t\t\treturn result"]],"start1":2008,"start2":2008,"length1":32,"length2":34},{"diffs":[[0,"esults;\n"],[-1,"        }\n    "],[1,"\t\t\t\t}\n\t\t"],[0,"});\n"],[1,"\t"],[0,"\treturn "]],"start1":2037,"start2":2037,"length1":34,"length2":29},{"diffs":[[0,"ed;\n"],[-1,"}\n\nfunction "],[1,"\t};\n\n\tmongodb."],[0,"getW"]],"start1":2073,"start2":2073,"length1":20,"length2":22},{"diffs":[[0,"tage"],[-1,"() {\n\t//initSchema();\n\t//Wine = mongoose.model('Wine');\n\tvar stats;"],[1," = function() {"],[0,"\n\n"],[1,"\t"],[0,"\tWin"]],"start1":2104,"start2":2104,"length1":77,"length2":26},{"diffs":[[0,"egate([\n"],[-1,"        "],[1,"\t\t\t"],[0,"{ $group"]],"start1":2136,"start2":2136,"length1":24,"length2":19},{"diffs":[[0,"roup: {\n"],[-1,"            "],[1,"\t\t\t\t"],[0,"_id: '$v"]],"start1":2151,"start2":2151,"length1":28,"length2":20},{"diffs":[[0,"ntage',\n"],[-1,"            "],[1,"\t\t\t\t"],[0,"sum: { $"]],"start1":2172,"start2":2172,"length1":28,"length2":20},{"diffs":[[0,"y'}\n"],[-1,"        }}\n    "],[1,"\t\t}}\n\t\t"],[0,"], f"]],"start1":2206,"start2":2206,"length1":23,"length2":15},{"diffs":[[0,"ults) {\n"],[-1,"        "],[1,"\t\t\t"],[0,"if (err)"]],"start1":2238,"start2":2238,"length1":24,"length2":19},{"diffs":[[0,"(err) {\n"],[-1,"            "],[1,"\t\t\t\t"],[0,"console."]],"start1":2252,"start2":2252,"length1":28,"length2":20},{"diffs":[[0,"r(err);\n"],[-1,"        "],[1,"\t\t\t"],[0,"} else {"]],"start1":2276,"start2":2276,"length1":24,"length2":19},{"diffs":[[0," else {\n"],[1,"\t"],[0,"\t\t\tretur"]],"start1":2288,"start2":2288,"length1":16,"length2":17},{"diffs":[[0,"ts;\n"],[-1,"        }\n    "],[1,"\t\t\t}\n\t\t"],[0,"});\n\n"],[1,"\t"],[0,"\tret"]],"start1":2312,"start2":2312,"length1":27,"length2":21},{"diffs":[[0,"d;\n\n"],[-1,"}\n\nmodule.exports.saveWine = saveWine;\nmodule.exports.getWinesByCountry = getWinesByCountry;\nmodule.exports.getWinesByType = getWinesByType;\nmodule.exports.getWinesByVintage = getWinesByVintage"],[1,"\t};\n\n\treturn mongodb;\n}"],[0,";\n"],[1,"\n"]],"start1":2345,"start2":2345,"length1":199,"length2":30}]],"length":2375,"saved":false}
{"contributors":[],"silentsave":true,"ts":1380293630648,"patch":[[{"diffs":[[0," = function("],[1,"cb"],[0,") {\n\t\tdebug("]],"start1":1264,"start2":1264,"length1":24,"length2":26}]],"length":2377,"saved":false}
{"ts":1380294230017,"patch":[[{"diffs":[[0,"turn undefined;\n"],[1,"\t\t\n            if (typeof callback != 'undefined') {\n                callback({\n                    response: response,\n                    body: result\n                });\n            }\n\t\t\n"],[0,"\t};\n\n\tmongodb.ge"]],"start1":1792,"start2":1792,"length1":32,"length2":222}]],"length":2567,"saved":false}
{"ts":1380294230740,"patch":[[{"diffs":[[0,"efined;\n"],[-1,"\t\t"],[0,"\n       "]],"start1":1800,"start2":1800,"length1":18,"length2":16},{"diffs":[[0,"      }\n"],[-1,"\t\t"],[0,"\n\t};\n\n\tm"]],"start1":1985,"start2":1985,"length1":18,"length2":16}]],"length":2563,"saved":false}
{"ts":1380294233280,"patch":[[{"diffs":[[0,"d;\n\n        "],[-1,"    "],[0,"if (typeof c"]],"start1":1805,"start2":1805,"length1":28,"length2":24},{"diffs":[[0,"        "],[-1,"    "],[0,"callback"]],"start1":1859,"start2":1859,"length1":20,"length2":16},{"diffs":[[0,"lback({\n"],[-1,"    "],[0,"        "]],"start1":1870,"start2":1870,"length1":20,"length2":16},{"diffs":[[0,"        "],[-1,"    "],[0,"body: re"]],"start1":1922,"start2":1922,"length1":20,"length2":16},{"diffs":[[0,"    "],[-1,"    });\n    "],[1,"});\n"],[0,"    "]],"start1":1951,"start2":1951,"length1":20,"length2":12}]],"length":2539,"saved":false}
{"ts":1380294239583,"patch":[[{"diffs":[[0,"= function(c"],[-1,"b"],[1,"allback"],[0,") {\n\t\tdebug("]],"start1":1265,"start2":1265,"length1":25,"length2":31}]],"length":2545,"saved":false}
{"ts":1380294249928,"patch":[[{"diffs":[[0,"d;\n\n"],[-1,"        if (typeof callback != 'undefined') {\n            callback({\n                response: response,\n                body: result\n            });\n        }\n"],[0,"\n\t};"]],"start1":1811,"start2":1811,"length1":168,"length2":8}]],"length":2385,"saved":false}
{"ts":1380294254000,"patch":[[{"diffs":[[0,"sults);\n"],[-1,"\t\t\t\treturn results;"],[1,"        if (typeof callback != 'undefined') {\n            callback({\n                response: response,\n                body: result\n            });\n        }"],[0,"\n\t\t\t}\n\t\t"]],"start1":1755,"start2":1755,"length1":35,"length2":175}]],"length":2525,"saved":false}
{"ts":1380294256685,"patch":[[{"diffs":[[0,"sults);\n"],[1,"\t\t"],[0,"        "]],"start1":1755,"start2":1755,"length1":16,"length2":18},{"diffs":[[0,"ned') {\n"],[1,"\t\t"],[0,"        "]],"start1":1803,"start2":1803,"length1":16,"length2":18},{"diffs":[[0,"lback({\n"],[1,"\t\t"],[0,"        "]],"start1":1828,"start2":1828,"length1":16,"length2":18},{"diffs":[[0,"sponse,\n"],[1,"\t\t"],[0,"        "]],"start1":1866,"start2":1866,"length1":16,"length2":18},{"diffs":[[0," result\n"],[1,"\t\t"],[0,"        "]],"start1":1897,"start2":1897,"length1":16,"length2":18},{"diffs":[[0,"    });\n"],[1,"\t\t"],[0,"        "]],"start1":1915,"start2":1915,"length1":16,"length2":18}]],"length":2537,"saved":false}
{"ts":1380294282592,"patch":[[{"diffs":[[0,"     res"],[-1,"ponse"],[1,"ults"],[0,": respon"]],"start1":1849,"start2":1849,"length1":21,"length2":20}]],"length":2536,"saved":false}
{"ts":1380294286028,"patch":[[{"diffs":[[0,"lts:"],[-1," response,\n\t\t                body:"],[0," result"],[1,"s"],[0,"\n\t\t "]],"start1":1858,"start2":1858,"length1":49,"length2":16}]],"length":2503,"saved":false}
{"contributors":[],"silentsave":true,"ts":1381502280646,"patch":[[{"diffs":[[0,"\"util\");"],[1,"\nvar debug = require('debug')('db');\n\ndebug('forecast.io')"],[0,"\n\nmodule"]],"start1":55,"start2":55,"length1":16,"length2":74},{"diffs":[[0," {\n\n"],[-1,"\tconsole.log(\"mongodb=\");\n\n"],[0,"\tvar"]],"start1":158,"start2":158,"length1":35,"length2":8},{"diffs":[[0,"lts);\n\t\t"],[-1,"        "],[1,"\t\t"],[0,"if (type"]],"start1":1788,"start2":1788,"length1":24,"length2":18},{"diffs":[[0,"d') {\n\t\t"],[-1,"            "],[1,"\t\t\t"],[0,"callback"]],"start1":1830,"start2":1830,"length1":28,"length2":19},{"diffs":[[0,"{\n\t\t"],[-1,"                results: results\n\t\t            "],[1,"\t\t\t\tdata: results\n\t\t\t\t\t"],[0,"});\n\t\t"],[1,"\t"],[-1,"        "],[1,"\t"],[0,"}\n\t\t"]],"start1":1850,"start2":1850,"length1":69,"length2":39},{"diffs":[[0,"fined;\n\n"],[-1,"\n"],[0,"\t};\n\n\tmo"]],"start1":1911,"start2":1911,"length1":17,"length2":16}]],"length":2488,"saved":false}
{"ts":1381502282707,"patch":[[{"diffs":[[0,"l\");"],[-1,"\nvar debug = require('debug')('db');"],[0,"\n\nde"]],"start1":59,"start2":59,"length1":44,"length2":8}]],"length":2452,"saved":false}
{"ts":1381502287333,"patch":[[{"diffs":[[0,"ug('"],[-1,"forecast.io"],[1,"mon"],[0,"')\n\n"]],"start1":68,"start2":68,"length1":19,"length2":11}]],"length":2444,"saved":false}
{"ts":1381502289316,"patch":[[{"diffs":[[0,"bug('mon"],[1,"godb"],[0,"')\n\nmodu"]],"start1":67,"start2":67,"length1":16,"length2":20}]],"length":2448,"saved":false}
{"ts":1381502292858,"patch":[[{"diffs":[[0,"ongodb')"],[1,";"],[0,"\n\nmodule"]],"start1":73,"start2":73,"length1":16,"length2":17}]],"length":2449,"saved":false}
